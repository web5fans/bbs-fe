#!/usr/bin/env tsx

export function hexToUint8Array(hex: string): Uint8Array {
  if (hex.startsWith('0x')) {
    hex = hex.slice(2)
  }

  if (hex.length % 2 !== 0) {
    throw new Error('Hex string must have even length')
  }

  const bytes = new Uint8Array(hex.length / 2)

  for (let i = 0; i < hex.length; i += 2) {
    bytes[i / 2] = parseInt(hex.slice(i, i + 2), 16)
  }

  return bytes
}

export function uint8ArrayToHex(arr: Uint8Array): string {
  return Array.from(arr)
    .map((byte) => byte.toString(16).padStart(2, '0'))
    .join('')
}

// const hex =
//   '0xA36364696478206469643A706C633A6E66707365676464347977336F366871347973713532356C637265766D336C746F666A627435756D786966626C6F636B7399011D183A18A218651872186F186F18741873188118D8182A185818250001187112182018DA187518E01840185A181F18531891187E18591873185418AC18F0185718261418E00718301618551861186018F618591829188C18AF18AB182B18CA186718761865187218731869186F186E0118E00101187112182018DA187518E01840185A181F18531891187E18591873185418AC18F0185718261418E00718301618551861186018F618591829188C18AF18AB182B18CA18A6186318641869186418781820186418691864183A1870186C1863183A186E18661870187318651867186418641834187918771833186F1836186818711834187918731871183518321835186C1863187218651876186D1833186C1874186F1866186A1862187418351875186D18781869186318731869186718581840186A18EA184A13187E181E18FE185A182D18C9182518A918DD186F00188418AD187C18F4185F1858188D18F018B7184E18EE1828186F16189418FC18F018180018DA18F81853186918F41614182818D814182A18D218B8182018FD1884183A1829185C0416189E186F187A183318BC18CD184E1824186F1864186418611874186118D8182A1858182500011871121820189D18FE18FE186118DD187618EA183D18CA18E5021838188018B01883187918D5187A18DF18201848182D186F18DB18E218751892188918F618471867187B1864187018721865187618F6186718761865187218731869186F186E03'

// let decode = cborCodec.decode(hexToUint8Array(hex))
// console.log(decode)
